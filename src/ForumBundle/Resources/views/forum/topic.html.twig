{% extends '@Forum/layout/layout.html.twig' %}

{% block title %}{{ topic.forum.title }} / {{ topic.title }}{% endblock %}

{% block content %}
    <ul data-role="listview" data-inset="true" data-split-icon="edit" data-split-theme="a">
        {% for post in posts %}
            <li class="ui-li-divider ui-bar-inherit ui-first-child" data-role="list-divider">{{ post.user.username }}: {{ post.createdAt|date }}</li>
            <li>
                <a>{{ post.text }}</a>
                {% if app.user.id is defined and app.user.id == post.user.id %}
                    <a href="{{ path('post_edit', {'id': post.id}) }}">Edit</a>
                {% endif %}
            </li>
        {% else %}
            <li>Пусто</li>
        {% endfor %}
    </ul>
    {% include 'ForumBundle:layout:paginate.html.twig' with {'data': posts} %}

    {{ form_start(form) }}
        {{ form_widget(form) }}
    {{ form_end(form) }}

    {% if app.user.id is defined and app.user.id == topic.user.id %}
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <a class="ui-shadow ui-btn ui-corner-all ui-btn-icon-left ui-icon-edit" href="{{ path('topic_edit', {'id': topic.id}) }}">Редактировать</a>
            </div>
            <div class="ui-block-b">
                <a class="ui-shadow ui-btn ui-corner-all ui-btn-icon-left ui-icon-delete" href="{{ path('topic_delete', {'id': topic.id}) }}">Удалить</a>
            </div>
        </div>
    {% endif %}
{% endblock %}